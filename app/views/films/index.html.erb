<h1>Film Management Dashboard</h1>

<a class="back-link" href="<%= root_path %>">Back to Home</a>

<input type="text" id="film-search" placeholder="Search films...">

<table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Screening Date</th>
      <th>Venue</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <% @films.each do |film| %>
      <tr class="film-row">
        <td class="film-title"><%= film.title %></td>
        <td><%= film.screening_date %></td>
        <td><%= film.venue %></td>
        <td><%= film.status %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<script>
document.addEventListener("turbo:load", function() {
  console.log("Film page script loaded");

  const searchInput = document.getElementById("film-search");
  console.log("Search input:", searchInput);
  if (searchInput) {
    searchInput.addEventListener("keyup", function() {
      const query = this.value.toLowerCase();
      console.log("Keyup detected, query:", query);

      const rows = document.querySelectorAll(".film-row");
      console.log("Found rows:", rows.length);

      rows.forEach(function(row) {
        const titleCell = row.querySelector(".film-title");
        console.log("Row title:", titleCell.textContent);
        const title = titleCell.textContent.toLowerCase();
        if (title.includes(query)) {
          row.style.display = "";
        } else {
          row.style.display = "none";
        }
      });
    });
  }
});
</script>

